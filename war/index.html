<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>LinkShare</title>
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

    $(document).ready(function() {
        // Fetch login window and options
        $.get("/login", function(responseHtml) {
            $("#session-management").html(responseHtml);    
        });
        
    	
        // Fetch links
        $.getJSON("/links", function(links) {
            // Fetch links
            console.debug(links);
            jQuery.each(links, function() {
                var link = this;
                var link = "<li><h3>" + link.score + "</h3> " + link.url + 
                   " <span class='link-submitter'>Submited by " + link.user.email + "</span></li>";
                $("ul#links").append(link);
            });
            $("#loading-image").hide();
        });
                            
    });
    </script>
</head>

<body>
<h1>Welcome to LinkShare</h1>
<div id="session-management">
    
</div>
<form action="/submit_link" method="POST">
<p>URL: <input type="text" name="url" /></p>
<input type="submit"></form>

<div id="loading-image"><!-- TODO: Turn this into either a template tag or function -->
<img src="/images/ajax-loader.gif"> Loading links ...</div>

<ul id="links">

</ul>

</body>
</html>
